!function(e,t){"use strict";function n(e){function t(e){if("INPUT"!==e.prop("tagName")||e.prop("type")&&"text"!==e.prop("type"))throw"This directive should be applied to input[type=text] element.";return n}function n(e,t,n,r){}var o={restrict:"A",controller:r,compile:t};return o}function r(e,n,r,o,u,i){function a(){return u.setSelection(n,h.$viewValue.start,h.$viewValue.end,h.$viewValue.dir),h}function l(e){return V(e,h.$viewValue)?h:(e||(e={}),f(h.$viewValue,e.start,e.end,e.dir),h)}function s(t){return t||(t={}),h.$modelValue||(h.$modelValue=m(e)),g&&V(g,h.$modelValue)?h:(f(h.$modelValue,t.start,t.end,t.dir),w(e,h.$modelValue),h)}function c(){var t,n=m(e);return v(n,h.$viewValue)?(f(n,n.pos,n.pos,!0),w(e,n),n):(h.$modelValue=n,t=h.$modelValue,h.$setViewValue(t).$render(),h.$modelValue.pos=h.$viewValue.pos,i.$$phase||e.$apply(),n)}function $(){S.forEach(function(e){n.on(e,p)})}function d(){S.forEach(function(e){n.off(e,p)})}function p(t){h.$viewValue=u.getSelection(n),y&&!i.$$phase&&e.$apply(function(){h.$setModelValue(h.$viewValue)})}function f(e,t,n,r){var o=Math.min(t,n),u=Math.max(t,n),i=r,a=i?u:o;return e.start=o,e.end=u,e.dir=i,e.pos=a,e}function V(e,t){if(!e||!t)return!1;var n=!0;return n=n&&e.start===t.start,n=n&&e.end===t.end,n=n&&e.dir===t.dir,n=n&&e.pos===t.pos}function v(e,t){if(!e||!t)return!1;var n=!0;return n=n&&e.start===t.start,n=n&&e.end===t.end,n=n&&e.dir===t.dir,n=n&&e.pos!==t.pos}var m,w,h=this,y=!!o[t];h.$setModelValue=s,h.$setViewValue=l,h.$viewValue=u.getSelection(n),h.$render=a,y&&(m=r(o[t]),w=m.assign,e.$watch(o[t],c,!0),h.$setModelValue({start:0,end:0,pos:0,dir:void 0}));var S=["click","keyup","keydown","keypress","mousedown","mouseup","focus","blur"];$(),e.$on("$destroy",d);var g}e.directive(t,n),n.$inject=["InputSelection"],r.$inject=["$scope","$element","$parse","$attrs","InputSelection","$rootScope"]}(angular.module("arth.cursor",["arth.svc.InputSelection"]),"arthCursor");
!function(e,r){"use strict";function t(){return{require:[r,"ngModel"],restrict:"A",controller:n}}function n(e,t,n,i,s,o,l,a){function c(e){for(var r=m.length,t=e;r--;)t=m[r](t,!0);return t}function u(e){var r=c(e);r!==d.$viewValue&&(d.$setViewValue(r),d.$render())}function f(e){var r=c(v.map(c).slice(0,e).join("")).length;o(function(){a.setSelection(n,r,r,!0)})}function h(e){var r=a.getSelection(n),t=v.map(c);"undefined"==typeof r.start&&(r.end=r.start=t.join("").length);for(var i=null,s=null,l=0,u=0,f=v.length;f>=l&&(u==r.start&&null===i||u>r.start&&null===i&&(i=l-1),u>=r.end&&null===s&&(s=l),l!=f);l++){var h=v[l];u+=c(h).length}null===i&&(i=s),v.splice(i,s-i,e),t.splice(i,s-i,e),o(function(){var r=t.slice(0,i).join("").length+c(e).length;a.setSelection(n,r,r,!0)})}var d=n.controller("ngModel"),v=[],p=(s(i.ngModel),s(i[r])(e)),g=[],m=[];angular.extend(p.svc,{format:c,updateView:u,tokens:v,setPos:f,addToken:h}),l.fillListProcesser(p.parsers,d.$parsers),l.fillListProcesser(p.parsers,g),l.fillListProcesser(p.formatters,d.$formatters),l.fillListProcesser(p.formatters,m)}function i(){function e(e,n){return Array.isArray(e)?(e.forEach(r(n)),t):t}function r(e){function r(r){var s="push";if(Array.isArray(r)){if(s=r[i],!~["push","unshift"].indexOf(s))throw new Error(t.name+": Wrong method ["+s+"] - push|unshift expected");r=r[n]}e[s](r)}var n=0,i=1;return r}var t=this;t.$name="ParseFormatService",this.getListProcesser=r,this.fillListProcesser=e}e.directive(r,t),e.service("ParseFormatService",i),t.$inject=[],n.$inject=["$scope","$rootScope","$element","$attrs","$parse","$timeout","ParseFormatService","InputSelection"],i.$inject=[]}(angular.module("arth.tokenized",[]),"arthTokenized");
!function(t){"use strict";function n(){function t(t){var o={start:n(t),end:e(t),dir:r(t)};return o.pos=o.dir?o.end:o.start,o}function n(t){return t[0].selectionStart}function e(t){return t[0].selectionEnd}function r(t){var n={none:void 0,forward:!0,backward:!1};return n[t[0].selectionDirection]}function o(t,n,e,r){n=n||0,e=e||0,t[0].setSelectionRange(Math.min(n,e),Math.max(n,e),"undefined"==typeof r?"none":r?"forward":"backward")}return{getSelection:t,getSelectionStart:n,getSelectionEnd:e,getSelectionDirection:r,setSelection:o}}t.factory("InputSelection",n)}(angular.module("arth.svc.InputSelection",[]));
!function(n){function t(n){var t=[],e=t[0]=[];return new n([",","\n"],function(n,t){t?("\n"==n||"\x00"==n)&&(this.tokens.push(e),e=[]):e.push(n)})}function e(){function n(n,t){this.tokenizers=Array.isArray(n)?n:[n],t&&(this.doBuild=t)}function t(t,e){function i(n,t){return"\x00"!==n?t?n:e?void 0:n:void 0}return new n(t,i)}function e(t,e){return function(i){function r(n,t,r){return"\x00"!==n?t?n.replace(r,function(n,t){return i[t]}):e?void 0:n:void 0}return new n(t,r)}}function i(n){this.src=n,this.ended=!1,this.tokens=[];do this.next();while(!this.ended);return this.tokens}function r(n,t){if(n){var e=this.doBuild?this.doBuild(n,t,this.tkn):n;"undefined"!=typeof e&&this.tokens.push(e)}}function s(){var n,t=this;t.search(),n=t.src.slice(0,t.min),t.build(n,!1),t.src=t.src.slice(t.min).replace(t.tkn,function(n){return t.build(n,!0),""}),t.src||(t.build("\x00",!0),t.ended=!0)}function u(){var n,t,e=this,i=0;for(e.min=-1,e.tkn="";"undefined"!=typeof(n=e.tokenizers[i++]);)t=e.src[n.test?"search":"indexOf"](n),-1!=t&&(-1==e.min||t<e.min)&&(e.tkn=n,e.min=t);-1==e.min&&(e.min=e.src.length)}return angular.extend(n.prototype,{parse:i,build:r,next:s,search:u}),n.getRepeater=t,n.getReplacer=e,n}n.factory("ParserFactory",e),n.service("CSVParser",t),t.$inject=["ParserFactory"],e.$inject=[]}(angular.module("arth.parser.svc",[]));